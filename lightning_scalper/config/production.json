{
  "_metadata": {
    "description": "Lightning Scalper Production Configuration",
    "version": "1.0.0",
    "environment": "production",
    "created": "2024-06-18",
    "last_updated": "2024-06-18",
    "security_level": "high",
    "notes": "Production-ready configuration with security and performance optimizations"
  },

  "application": {
    "name": "Lightning Scalper",
    "version": "1.0.0",
    "environment": "production",
    "debug_mode": false,
    "auto_start_trading": true,
    "max_clients": 100,
    "enable_logging": true,
    "log_level": "INFO",
    "log_rotation": {
      "enabled": true,
      "max_size_mb": 100,
      "backup_count": 30,
      "compress": true
    }
  },

  "server": {
    "host": "0.0.0.0",
    "port": 8080,
    "workers": 4,
    "max_connections": 1000,
    "timeout": 30,
    "enable_ssl": true,
    "ssl_cert_path": "/etc/ssl/certs/lightning-scalper.crt",
    "ssl_key_path": "/etc/ssl/private/lightning-scalper.key",
    "enable_compression": true,
    "compression_level": 6
  },

  "database": {
    "type": "postgresql",
    "host": "${DATABASE_HOST}",
    "port": 5432,
    "name": "${DATABASE_NAME}",
    "username": "${DATABASE_USER}",
    "password": "${DATABASE_PASSWORD}",
    "ssl_mode": "require",
    "pool_size": 20,
    "max_overflow": 50,
    "pool_timeout": 30,
    "pool_recycle": 3600,
    "echo": false,
    "backup": {
      "enabled": true,
      "schedule": "0 2 * * *",
      "retention_days": 30,
      "storage_path": "/backups/database"
    }
  },

  "cache": {
    "type": "redis",
    "host": "${REDIS_HOST}",
    "port": 6379,
    "password": "${REDIS_PASSWORD}",
    "db": 0,
    "max_connections": 50,
    "socket_timeout": 5,
    "socket_connect_timeout": 5,
    "retry_on_timeout": true,
    "health_check_interval": 30
  },

  "fvg_engine": {
    "timeframes": ["M1", "M5", "M15", "M30", "H1"],
    "currency_pairs": [
      "EURUSD", "GBPUSD", "USDJPY", "USDCHF", "AUDUSD",
      "USDCAD", "NZDUSD", "EURJPY", "GBPJPY", "XAUUSD"
    ],
    "min_gap_size_pips": 5,
    "max_gap_size_pips": 100,
    "min_confluence_score": 70.0,
    "max_signals_per_hour": 20,
    "signal_expiry_minutes": 30,
    "enable_multi_timeframe": true,
    "volume_confirmation": true,
    "trend_alignment": true,
    "support_resistance_check": true
  },

  "risk_management": {
    "global_settings": {
      "max_daily_loss_percent": 5.0,
      "max_weekly_loss_percent": 10.0,
      "max_monthly_loss_percent": 20.0,
      "emergency_stop_loss_percent": 8.0,
      "max_correlation_threshold": 0.7,
      "max_positions_per_client": 10,
      "max_total_positions": 500
    },
    "client_defaults": {
      "risk_per_trade_percent": 1.0,
      "max_risk_per_trade_percent": 3.0,
      "max_positions": 5,
      "max_daily_trades": 20,
      "max_lot_size": 1.0,
      "stop_loss_buffer_pips": 2,
      "take_profit_multiplier": 2.0
    },
    "monitoring": {
      "real_time_monitoring": true,
      "alert_thresholds": {
        "drawdown_percent": 15.0,
        "consecutive_losses": 5,
        "daily_loss_percent": 3.0
      },
      "auto_halt_trading": true
    }
  },

  "trading": {
    "sessions": {
      "sydney": {
        "start": "21:00",
        "end": "06:00",
        "timezone": "UTC",
        "enabled": true,
        "max_spread_pips": 3.0
      },
      "tokyo": {
        "start": "23:00",
        "end": "08:00",
        "timezone": "UTC", 
        "enabled": true,
        "max_spread_pips": 2.5
      },
      "london": {
        "start": "07:00",
        "end": "16:00",
        "timezone": "UTC",
        "enabled": true,
        "max_spread_pips": 2.0
      },
      "new_york": {
        "start": "12:00",
        "end": "21:00",
        "timezone": "UTC",
        "enabled": true,
        "max_spread_pips": 2.0
      }
    },
    "execution": {
      "max_slippage_pips": 3,
      "execution_timeout_seconds": 15,
      "retry_attempts": 3,
      "retry_delay_seconds": 1,
      "enable_partial_fills": true,
      "order_expiry_minutes": 5
    },
    "filters": {
      "enable_news_filter": true,
      "news_buffer_minutes": 30,
      "high_impact_currencies": ["USD", "EUR", "GBP", "JPY"],
      "enable_spread_filter": true,
      "enable_volatility_filter": true,
      "min_liquidity_threshold": 1000000
    }
  },

  "mt5_integration": {
    "connection": {
      "timeout_seconds": 30,
      "max_retries": 5,
      "retry_delay_seconds": 2,
      "health_check_interval": 60,
      "auto_reconnect": true,
      "keep_alive_interval": 30
    },
    "execution": {
      "magic_number_range": [100000, 999999],
      "default_deviation": 10,
      "max_deviation": 50,
      "filling_policy": "IOC",
      "enable_hedge_accounting": false
    },
    "monitoring": {
      "position_sync_interval": 30,
      "account_sync_interval": 60,
      "price_sync_interval": 1,
      "enable_trade_copying": false
    }
  },

  "web_dashboard": {
    "host": "0.0.0.0",
    "port": 5000,
    "workers": 2,
    "enable_ssl": true,
    "session_timeout": 3600,
    "max_clients": 50,
    "real_time_updates": true,
    "websocket": {
      "enabled": true,
      "ping_interval": 25,
      "ping_timeout": 60,
      "max_message_size": 1048576
    },
    "authentication": {
      "enabled": true,
      "session_key": "${DASHBOARD_SESSION_KEY}",
      "token_expiry_hours": 24,
      "max_login_attempts": 5,
      "lockout_duration_minutes": 30
    },
    "features": {
      "enable_charts": true,
      "enable_client_management": true,
      "enable_signal_history": true,
      "enable_performance_analytics": true,
      "enable_risk_monitoring": true,
      "enable_system_diagnostics": true
    }
  },

  "data_collection": {
    "enabled": true,
    "trade_data": {
      "collect_execution_metrics": true,
      "collect_market_conditions": true,
      "collect_client_behavior": true,
      "anonymize_client_data": true
    },
    "storage": {
      "local_database": true,
      "cloud_backup": true,
      "retention_days": 365,
      "compression": true
    },
    "sync": {
      "enabled": true,
      "server_url": "${DATA_SYNC_SERVER_URL}",
      "sync_interval_minutes": 10,
      "batch_size": 100,
      "compression": true,
      "encryption": true
    },
    "analytics": {
      "real_time_analysis": true,
      "model_feedback": true,
      "performance_tracking": true,
      "anomaly_detection": true
    }
  },

  "security": {
    "api_authentication": {
      "enabled": true,
      "key_expiry_days": 90,
      "rate_limiting": {
        "enabled": true,
        "max_requests_per_minute": 100,
        "burst_limit": 200
      },
      "ip_whitelisting": {
        "enabled": false,
        "allowed_ips": []
      }
    },
    "encryption": {
      "algorithm": "AES-256-GCM",
      "key_rotation_days": 30,
      "encrypt_sensitive_data": true,
      "encrypt_communications": true
    },
    "audit": {
      "enabled": true,
      "log_all_actions": true,
      "retention_days": 90,
      "alert_on_suspicious_activity": true
    },
    "compliance": {
      "data_protection": true,
      "audit_trail": true,
      "access_controls": true,
      "encryption_at_rest": true,
      "encryption_in_transit": true
    }
  },

  "monitoring": {
    "health_checks": {
      "enabled": true,
      "interval_seconds": 30,
      "timeout_seconds": 10,
      "endpoints": [
        "/health",
        "/api/system_status",
        "/api/trading_status"
      ]
    },
    "metrics": {
      "enabled": true,
      "collection_interval": 60,
      "retention_days": 30,
      "export_format": "prometheus"
    },
    "alerting": {
      "enabled": true,
      "channels": ["email", "webhook", "dashboard"],
      "thresholds": {
        "cpu_usage_percent": 80,
        "memory_usage_percent": 85,
        "disk_usage_percent": 90,
        "error_rate_percent": 5,
        "response_time_ms": 1000
      }
    },
    "logging": {
      "centralized": true,
      "structured": true,
      "sampling_rate": 1.0,
      "sensitive_data_masking": true
    }
  },

  "performance": {
    "caching": {
      "enabled": true,
      "ttl_seconds": 300,
      "max_size_mb": 512,
      "compression": true
    },
    "optimization": {
      "enable_async_processing": true,
      "worker_threads": 8,
      "batch_processing": true,
      "lazy_loading": true
    },
    "scaling": {
      "auto_scaling": true,
      "min_instances": 2,
      "max_instances": 10,
      "scale_up_threshold": 70,
      "scale_down_threshold": 30,
      "cooldown_minutes": 5
    }
  },

  "backup": {
    "enabled": true,
    "schedule": "0 3 * * *",
    "retention": {
      "daily_backups": 7,
      "weekly_backups": 4,
      "monthly_backups": 6
    },
    "storage": {
      "local_path": "/backups/lightning-scalper",
      "cloud_storage": true,
      "encryption": true,
      "compression": true
    },
    "verification": {
      "test_restore": true,
      "integrity_checks": true,
      "automated_testing": true
    }
  },

  "disaster_recovery": {
    "enabled": true,
    "hot_standby": true,
    "failover_timeout_seconds": 30,
    "data_replication": {
      "enabled": true,
      "sync_mode": "async",
      "lag_threshold_seconds": 60
    },
    "recovery_procedures": {
      "automated": true,
      "manual_approval_required": false,
      "notification_channels": ["email", "sms"]
    }
  },

  "client_management": {
    "onboarding": {
      "automated_setup": true,
      "demo_period_days": 7,
      "verification_required": true,
      "risk_assessment": true
    },
    "limits": {
      "max_clients_per_ib": 100,
      "max_accounts_per_client": 3,
      "trial_period_days": 30
    },
    "support": {
      "auto_responses": true,
      "escalation_rules": true,
      "sla_response_hours": 4
    }
  },

  "integration": {
    "external_apis": {
      "news_feeds": {
        "enabled": true,
        "providers": ["forexfactory", "bloomberg"],
        "update_interval_minutes": 5
      },
      "market_data": {
        "enabled": true,
        "providers": ["mt5", "external"],
        "failover_enabled": true
      },
      "notifications": {
        "email": {
          "enabled": true,
          "smtp_server": "${SMTP_SERVER}",
          "smtp_port": 587,
          "use_tls": true
        },
        "telegram": {
          "enabled": true,
          "bot_token": "${TELEGRAM_BOT_TOKEN}"
        },
        "webhook": {
          "enabled": true,
          "endpoints": []
        }
      }
    }
  },

  "environment_variables": {
    "_note": "These should be set in the environment or .env file",
    "required": [
      "DATABASE_HOST",
      "DATABASE_NAME", 
      "DATABASE_USER",
      "DATABASE_PASSWORD",
      "REDIS_HOST",
      "REDIS_PASSWORD",
      "DASHBOARD_SESSION_KEY",
      "DATA_SYNC_SERVER_URL",
      "SMTP_SERVER",
      "TELEGRAM_BOT_TOKEN",
      "ENCRYPTION_KEY",
      "API_SECRET_KEY"
    ],
    "optional": [
      "LOG_LEVEL",
      "DEBUG_MODE",
      "MAX_CLIENTS",
      "BACKUP_STORAGE_PATH",
      "CLOUD_STORAGE_KEY"
    ]
  },

  "deployment": {
    "method": "docker",
    "container": {
      "image": "lightning-scalper:latest",
      "cpu_limit": "2000m",
      "memory_limit": "4Gi",
      "restart_policy": "always"
    },
    "load_balancer": {
      "enabled": true,
      "algorithm": "round_robin",
      "health_check_path": "/health"
    },
    "service_mesh": {
      "enabled": false,
      "provider": "istio"
    }
  }
}